
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Singapore Worker Support Bot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .chatbot-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            height: 600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .chatbot-header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .chatbot-header h2 {
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .chatbot-header p {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 15px;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            display: flex;
            align-items: flex-start;
        }

        .bot-avatar {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .bot-text {
            background: white;
            padding: 12px 16px;
            border-radius: 18px 18px 18px 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 85%;
            line-height: 1.4;
            font-size: 13px;
        }

        .user-message {
            display: flex;
            justify-content: flex-end;
        }

        .user-text {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px 16px;
            border-radius: 18px 18px 5px 18px;
            max-width: 80%;
            line-height: 1.4;
        }

        .input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
        }

        .input-row {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            border: 2px solid #e1e5e9;
            border-radius: 25px;
            padding: 12px 20px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .send-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        .send-button:hover {
            transform: scale(1.05);
        }

        .send-button:active {
            transform: scale(0.95);
        }

        .quick-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .quick-option {
            background: #e3f2fd;
            color: #1976d2;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .quick-option:hover {
            background: #bbdefb;
            transform: translateY(-1px);
        }

        .language-option {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .language-option:hover {
            background: #e1bee7;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            margin-bottom: 15px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
            margin-left: 45px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .service-card {
            background: #f8fffe;
            border: 1px solid #b2dfdb;
            border-radius: 12px;
            padding: 14px;
            margin: 8px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .service-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .service-icon {
            font-size: 18px;
            margin-right: 8px;
        }

        .service-title {
            font-weight: bold;
            color: #00695c;
            font-size: 14px;
        }

        .service-details {
            font-size: 11px;
            color: #37474f;
            line-height: 1.4;
        }

        .contact-info {
            background: #e8f5e8;
            padding: 8px;
            border-radius: 8px;
            margin-top: 8px;
            font-size: 10px;
        }

        .contact-item {
            margin: 2px 0;
            display: flex;
            align-items: center;
        }

        .contact-icon {
            margin-right: 5px;
            width: 12px;
        }

        .subcategory-card {
            background: #fff3e0;
            border: 1px solid #ffcc02;
            border-radius: 10px;
            padding: 10px;
            margin: 5px 0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .subcategory-card:hover {
            background: #ffe0b2;
            transform: translateY(-1px);
        }

        .subcategory-title {
            font-weight: bold;
            color: #e65100;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .subcategory-desc {
            font-size: 10px;
            color: #bf360c;
        }

        .back-button {
            background: #ffecb3;
            color: #ff6f00;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 11px;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="chatbot-container">
        <div class="chatbot-header">
            <h2 id="headerTitle">Singapore Migrant Worker Support</h2>
            <p id="headerSubtitle">Your guide to affordable services & housing</p>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <div class="bot-avatar">üè†</div>
                <div class="bot-text" id="welcomeMessage">
                    Welcome! I'm here to help you find affordable housing, healthcare, and other essential services in Singapore. Let's start by getting to know you better.
                </div>
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>

        <div class="input-container">
            <div class="input-row">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type your message...">
                <button class="send-button" id="sendButton">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/>
                    </svg>
                </button>
            </div>
            <div class="quick-options" id="quickOptions"></div>
        </div>
    </div>

    <script>
        class MigrantWorkerChatbot {
            constructor() {
                this.currentLanguage = 'en';
                this.conversationState = 'welcome';
                this.userProfile = {};
                this.currentCategory = null;
                this.translations = {
                    en: {
                        headerTitle: "Singapore Migrant Worker Support",
                        headerSubtitle: "Your guide to affordable services & housing",
                        welcomeMessage: "Welcome! I'm here to help you find affordable housing, healthcare, and other essential services in Singapore. Let's start by getting to know you better.",
                        inputPlaceholder: "Type your message...",
                        nameQuestion: "What's your name?",
                        nationalityQuestion: "What's your nationality?",
                        workTypeQuestion: "What type of work do you do?",
                        budgetQuestion: "What's your monthly budget for accommodation?",
                        servicesQuestion: "What services do you need help with?",
                        languageQuestion: "First, please select your preferred language:",
                        healthcareOption: "üè• Healthcare Services",
                        housingOption: "üè† Housing & Accommodation", 
                        groceriesOption: "üõí Groceries & Food",
                        legalOption: "‚öñÔ∏è Legal Aid",
                        socialOption: "üë• Social Life & Community",
                        financialOption: "üí∞ Financial Services",
                        emergencyOption: "üö® Emergency Help",
                        backToServices: "‚Üê Back to Services",
                        changeLanguage: "üåê Change Language"
                    },
                    zh: {
                        headerTitle: "Êñ∞Âä†Âù°Â∑•‰∫∫ÊîØÊè¥",
                        headerSubtitle: "ÊÇ®ÁöÑÁªèÊµéÂÆûÊÉ†ÊúçÂä°Âíå‰ΩèÊàøÊåáÂçó",
                        welcomeMessage: "Ê¨¢ËøéÔºÅÊàëÂú®ËøôÈáåÂ∏ÆÂä©ÊÇ®Âú®Êñ∞Âä†Âù°ÊâæÂà∞ÁªèÊµéÂÆûÊÉ†ÁöÑ‰ΩèÊàø„ÄÅÂåªÁñó‰øùÂÅ•ÂíåÂÖ∂‰ªñÂü∫Êú¨ÊúçÂä°„ÄÇËÆ©Êàë‰ª¨ÂÖà‰∫ÜËß£‰∏Ä‰∏ãÊÇ®„ÄÇ",
                        inputPlaceholder: "ËæìÂÖ•ÊÇ®ÁöÑÊ∂àÊÅØ...",
                        nameQuestion: "ÊÇ®ÁöÑÂßìÂêçÊòØ‰ªÄ‰πàÔºü",
                        nationalityQuestion: "ÊÇ®ÁöÑÂõΩÁ±çÊòØ‰ªÄ‰πàÔºü",
                        workTypeQuestion: "ÊÇ®‰ªé‰∫ã‰ªÄ‰πàÁ±ªÂûãÁöÑÂ∑•‰ΩúÔºü",
                        budgetQuestion: "ÊÇ®ÊØèÊúàÁöÑ‰ΩèÂÆøÈ¢ÑÁÆóÊòØÂ§öÂ∞ëÔºü",
                        servicesQuestion: "ÊÇ®ÈúÄË¶Å‰ªÄ‰πàÊúçÂä°Â∏ÆÂä©Ôºü",
                        languageQuestion: "È¶ñÂÖàÔºåËØ∑ÈÄâÊã©ÊÇ®ÁöÑÈ¶ñÈÄâËØ≠Ë®ÄÔºö",
                        healthcareOption: "üè• ÂåªÁñóÊúçÂä°",
                        housingOption: "üè† ‰ΩèÊàøÂíå‰ΩèÂÆø",
                        groceriesOption: "üõí ÊùÇË¥ßÂíåÈ£üÂìÅ",
                        legalOption: "‚öñÔ∏è Ê≥ïÂæãÊè¥Âä©",
                        socialOption: "üë• Á§æ‰∫§ÁîüÊ¥ªÂíåÁ§æÂå∫",
                        financialOption: "üí∞ ÈáëËûçÊúçÂä°",
                        emergencyOption: "üö® Á¥ßÊÄ•Â∏ÆÂä©",
                        backToServices: "‚Üê ËøîÂõûÊúçÂä°",
                        changeLanguage: "üåê Êõ¥ÊîπËØ≠Ë®Ä"
                    },
                    ta: {
                        headerTitle: "‡Æö‡Æø‡Æô‡Øç‡Æï‡Æ™‡Øç‡Æ™‡ØÇ‡Æ∞‡Øç ‡Æ§‡Øä‡Æ¥‡Æø‡Æ≤‡Ææ‡Æ≥‡Æ∞‡Øç ‡ÆÜ‡Æ§‡Æ∞‡Æµ‡ØÅ",
                        headerSubtitle: "‡ÆÆ‡Æ≤‡Æø‡Æµ‡Ææ‡Æ© ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æµ‡ØÄ‡Æü‡ØÅ‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡Ææ‡Æ© ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø",
                        welcomeMessage: "‡Æµ‡Æ∞‡Æµ‡Øá‡Æ±‡Øç‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç! ‡Æö‡Æø‡Æô‡Øç‡Æï‡Æ™‡Øç‡Æ™‡ØÇ‡Æ∞‡Æø‡Æ≤‡Øç ‡ÆÆ‡Æ≤‡Æø‡Æµ‡Ææ‡Æ© ‡Æµ‡ØÄ‡Æü‡ØÅ, ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞‡ÆÆ‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æø‡Æ± ‡ÆÖ‡Æ§‡Øç‡Æ§‡Æø‡ÆØ‡Ææ‡Æµ‡Æö‡Æø‡ÆØ ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ ‡Æ®‡Ææ‡Æ©‡Øç ‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æá‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç. ‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Æø‡Æ≤‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡Æ§‡ØÜ‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æï‡Øä‡Æ≥‡Øç‡Æµ‡Øã‡ÆÆ‡Øç.",
                        inputPlaceholder: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡Æø‡ÆØ‡Øà ‡Æ§‡Æü‡Øç‡Æü‡Æö‡Øç‡Æö‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç...",
                        nameQuestion: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡Æé‡Æ©‡Øç‡Æ©?",
                        nationalityQuestion: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Øá‡Æö‡Æø‡ÆØ‡ÆÆ‡Øç ‡Æé‡Æ©‡Øç‡Æ©?",
                        workTypeQuestion: "‡Æ®‡ØÄ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æé‡Æ©‡Øç‡Æ© ‡Æµ‡Æï‡Øà‡ÆØ‡Ææ‡Æ© ‡Æµ‡Øá‡Æ≤‡Øà ‡Æö‡ØÜ‡ÆØ‡Øç‡Æï‡Æø‡Æ±‡ØÄ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç?",
                        budgetQuestion: "‡Æ§‡Æô‡Øç‡Æï‡ØÅ‡ÆÆ‡Æø‡Æü‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡Ææ‡Æ© ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Ææ‡Æ§‡Ææ‡Æ®‡Øç‡Æ§‡Æø‡Æ∞ ‡Æ™‡Æü‡Øç‡Æú‡ØÜ‡Æü‡Øç ‡Æé‡Æ©‡Øç‡Æ©?",
                        servicesQuestion: "‡Æé‡Æ®‡Øç‡Æ§ ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æâ‡Æ§‡Æµ‡Æø ‡Æ§‡Øá‡Æµ‡Øà?",
                        languageQuestion: "‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Æø‡Æ≤‡Øç, ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡ÆÆ‡Ææ‡Æ© ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç:",
                        healthcareOption: "üè• ‡Æö‡ØÅ‡Æï‡Ææ‡Æ§‡Ææ‡Æ∞ ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øç",
                        housingOption: "üè† ‡Æµ‡ØÄ‡Æü‡ØÅ ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Æô‡Øç‡Æï‡ØÅ‡ÆÆ‡Æø‡Æü‡ÆÆ‡Øç",
                        groceriesOption: "üõí ‡Æâ‡Æ£‡Æµ‡ØÅ‡Æ™‡Øç ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æü‡Øç‡Æï‡Æ≥‡Øç",
                        legalOption: "‚öñÔ∏è ‡Æö‡Æü‡Øç‡Æü ‡Æâ‡Æ§‡Æµ‡Æø",
                        socialOption: "üë• ‡Æö‡ÆÆ‡ØÇ‡Æï ‡Æµ‡Ææ‡Æ¥‡Øç‡Æï‡Øç‡Æï‡Øà",
                        financialOption: "üí∞ ‡Æ®‡Æø‡Æ§‡Æø ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øç",
                        emergencyOption: "üö® ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æâ‡Æ§‡Æµ‡Æø",
                        backToServices: "‚Üê ‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ‡Æ§‡Øç ‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ",
                        changeLanguage: "üåê ‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà ‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡ØÅ"
                    },
                    hi: {
                        headerTitle: "‡§∏‡§ø‡§Ç‡§ó‡§æ‡§™‡•Å‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§∞‡•ç‡§§‡§æ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ",
                        headerSubtitle: "‡§ï‡§ø‡§´‡§æ‡§Ø‡§§‡•Ä ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§î‡§∞ ‡§Ü‡§µ‡§æ‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡§æ ‡§ó‡§æ‡§á‡§°",
                        welcomeMessage: "‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! ‡§Æ‡•à‡§Ç ‡§Ø‡§π‡§æ‡§Å ‡§Ü‡§™‡§ï‡•ã ‡§∏‡§ø‡§Ç‡§ó‡§æ‡§™‡•Å‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§´‡§æ‡§Ø‡§§‡•Ä ‡§Ü‡§µ‡§æ‡§∏, ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•á‡§µ‡§æ ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç ‡§ñ‡•ã‡§ú‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•Ç‡§Å‡•§ ‡§Ü‡§á‡§è ‡§™‡§π‡§≤‡•á ‡§Ü‡§™‡§ï‡•ã ‡§ú‡§æ‡§®‡§§‡•á ‡§π‡•à‡§Ç‡•§",
                        inputPlaceholder: "‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç...",
                        nameQuestion: "‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                        nationalityQuestion: "‡§Ü‡§™‡§ï‡•Ä ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø‡§§‡§æ ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                        workTypeQuestion: "‡§Ü‡§™ ‡§ï‡§ø‡§∏ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡§æ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç?",
                        budgetQuestion: "‡§Ü‡§µ‡§æ‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§™‡§ï‡§æ ‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§¨‡§ú‡§ü ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                        servicesQuestion: "‡§Ü‡§™‡§ï‡•ã ‡§ï‡§ø‡§® ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ö‡§æ‡§π‡§ø‡§è?",
                        languageQuestion: "‡§™‡§π‡§≤‡•á, ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç:",
                        healthcareOption: "üè• ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç",
                        housingOption: "üè† ‡§Ü‡§µ‡§æ‡§∏ ‡§î‡§∞ ‡§®‡§ø‡§µ‡§æ‡§∏",
                        groceriesOption: "üõí ‡§ï‡§ø‡§∞‡§æ‡§®‡§æ ‡§î‡§∞ ‡§≠‡•ã‡§ú‡§®",
                        legalOption: "‚öñÔ∏è ‡§ï‡§æ‡§®‡•Ç‡§®‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ",
                        socialOption: "üë• ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§ú‡•Ä‡§µ‡§®",
                        financialOption: "üí∞ ‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç",
                        emergencyOption: "üö® ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ",
                        backToServices: "‚Üê ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç",
                        changeLanguage: "üåê ‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤‡•á‡§Ç"
                    },
                    bn: {
                        headerTitle: "‡¶∏‡¶ø‡¶ô‡ßç‡¶ó‡¶æ‡¶™‡ßÅ‡¶∞ ‡¶∂‡ßç‡¶∞‡¶Æ‡¶ø‡¶ï ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ",
                        headerSubtitle: "‡¶∏‡¶æ‡¶∂‡ßç‡¶∞‡¶Ø‡¶º‡ßÄ ‡¶∏‡ßá‡¶¨‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶¨‡¶æ‡¶∏‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡¶æ‡¶á‡¶°",
                        welcomeMessage: "‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! ‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡¶ø‡¶ô‡ßç‡¶ó‡¶æ‡¶™‡ßÅ‡¶∞‡ßá ‡¶∏‡¶æ‡¶∂‡ßç‡¶∞‡¶Ø‡¶º‡ßÄ ‡¶Ü‡¶¨‡¶æ‡¶∏‡¶®, ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡¶∏‡ßá‡¶¨‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßÄ‡¶Ø‡¶º ‡¶∏‡ßá‡¶¨‡¶æ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶™‡ßá‡¶§‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶è‡¶∏‡ßá‡¶õ‡¶ø‡•§ ‡¶Ü‡¶∏‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡ßá ‡¶ú‡¶æ‡¶®‡¶ø‡•§",
                        inputPlaceholder: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡ßÅ‡¶®...",
                        nameQuestion: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ï‡¶ø?",
                        nationalityQuestion: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ú‡¶æ‡¶§‡ßÄ‡¶Ø‡¶º‡¶§‡¶æ ‡¶ï‡¶ø?",
                        workTypeQuestion: "‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶ß‡¶∞‡¶®‡ßá‡¶∞ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá‡¶®?",
                        budgetQuestion: "‡¶Ü‡¶¨‡¶æ‡¶∏‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡¶æ‡¶ú‡ßá‡¶ü ‡¶ï‡¶§?",
                        servicesQuestion: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡ßã‡¶® ‡¶∏‡ßá‡¶¨‡¶æ‡¶Ø‡¶º ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞?",
                        languageQuestion: "‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá, ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶õ‡¶®‡ßç‡¶¶‡ßá‡¶∞ ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:",
                        healthcareOption: "üè• ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø‡¶∏‡ßá‡¶¨‡¶æ",
                        housingOption: "üè† ‡¶Ü‡¶¨‡¶æ‡¶∏‡¶® ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶æ‡¶∏‡¶∏‡ßç‡¶•‡¶æ‡¶®",
                        groceriesOption: "üõí ‡¶ñ‡¶æ‡¶¶‡ßç‡¶Ø‡¶¶‡ßç‡¶∞‡¶¨‡ßç‡¶Ø",
                        legalOption: "‚öñÔ∏è ‡¶Ü‡¶á‡¶®‡¶ø ‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡¶§‡¶æ",
                        socialOption: "üë• ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶ú‡¶ø‡¶ï ‡¶ú‡ßÄ‡¶¨‡¶®",
                        financialOption: "üí∞ ‡¶Ü‡¶∞‡ßç‡¶•‡¶ø‡¶ï ‡¶∏‡ßá‡¶¨‡¶æ",
                        emergencyOption: "üö® ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø",
                        backToServices: "‚Üê ‡¶∏‡ßá‡¶¨‡¶æ‡¶∏‡¶Æ‡ßÇ‡¶π‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®",
                        changeLanguage: "üåê ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®"
                    },
                    id: {
                        headerTitle: "Dukungan Pekerja Singapura",
                        headerSubtitle: "Panduan Anda untuk layanan dan perumahan terjangkau",
                        welcomeMessage: "Selamat datang! Saya di sini untuk membantu Anda menemukan perumahan, layanan kesehatan, dan layanan penting lainnya yang terjangkau di Singapura. Mari kita mulai dengan mengenal Anda lebih baik.",
                        inputPlaceholder: "Ketik pesan Anda...",
                        nameQuestion: "Siapa nama Anda?",
                        nationalityQuestion: "Apa kebangsaan Anda?",
                        workTypeQuestion: "Jenis pekerjaan apa yang Anda lakukan?",
                        budgetQuestion: "Berapa anggaran bulanan Anda untuk akomodasi?",
                        servicesQuestion: "Layanan apa yang Anda butuhkan bantuan?",
                        languageQuestion: "Pertama, silakan pilih bahasa pilihan Anda:",
                        healthcareOption: "üè• Layanan Kesehatan",
                        housingOption: "üè† Perumahan & Akomodasi",
                        groceriesOption: "üõí Bahan Makanan",
                        legalOption: "‚öñÔ∏è Bantuan Hukum",
                        socialOption: "üë• Kehidupan Sosial",
                        financialOption: "üí∞ Layanan Keuangan",
                        emergencyOption: "üö® Bantuan Darurat",
                        backToServices: "‚Üê Kembali ke Layanan",
                        changeLanguage: "üåê Ubah Bahasa"
                    }
                };
                
                // Comprehensive service database - EASY TO EXTEND
                this.serviceDatabase = {
                    healthcare: {
                        title: "Healthcare Services",
                        icon: "üè•",
                        subcategories: {
                            mental_health: {
                                title: "Mental Health",
                                icon: "üß†",
                                services: [
                                    {
                                        name: "Institute of Mental Health (IMH)",
                                        description: "24/7 mental health emergency services and counseling",
                                        website: "https://www.imh.com.sg",
                                        phone: "6389-2200",
                                        emergency: "6389-2222",
                                        address: "10 Buangkok View, Singapore 539747",
                                        hours: "24/7 Emergency, 8:30AM-5:30PM Outpatient",
                                        cost: "Subsidized rates available"
                                    },
                                    {
                                        name: "Samaritans of Singapore (SOS)",
                                        description: "Free confidential emotional support helpline",
                                        website: "https://www.sos.org.sg",
                                        phone: "1767 (24/7 Hotline)",
                                        email: "pat@sos.org.sg",
                                        address: "Multiple locations",
                                        hours: "24/7",
                                        cost: "Free"
                                    }
                                ]
                            },
                            eyecare: {
                                title: "Eye Care",
                                icon: "üëÅÔ∏è",
                                services: [
                                    {
                                        name: "Singapore National Eye Centre",
                                        description: "Comprehensive eye care and surgery",
                                        website: "https://www.snec.com.sg",
                                        phone: "6227-7266",
                                        appointment: "https://www.snec.com.sg/patient-care/appointments",
                                        address: "11 Third Hospital Avenue, Singapore 168751",
                                        hours: "Mon-Fri 8:00AM-5:30PM",
                                        cost: "Subsidized rates for citizens/PR"
                                    },
                                    {
                                        name: "Polyclinic Eye Screening",
                                        description: "Basic eye tests and screening",
                                        website: "https://www.healthhub.sg",
                                        phone: "6355-3000",
                                        address: "Multiple polyclinic locations",
                                        hours: "Varies by location",
                                        cost: "$10.50 - $13.50"
                                    }
                                ]
                            },
                            dental: {
                                title: "Dental Health",
                                icon: "ü¶∑",
                                services: [
                                    {
                                        name: "National Dental Centre Singapore",
                                        description: "Comprehensive dental care and specialist treatments",
                                        website: "https://www.ndcs.com.sg",
                                        phone: "6324-8800",
                                        appointment: "https://www.ndcs.com.sg/patient-care/appointments",
                                        address: "5 Second Hospital Avenue, Singapore 168938",
                                        hours: "Mon-Fri 8:00AM-5:30PM",
                                        cost: "Subsidized rates available"
                                    },
                                    {
                                        name: "Polyclinic Dental Services",
                                        description: "Basic dental care and treatments",
                                        website: "https://www.healthhub.sg",
                                        phone: "Multiple locations",
                                        address: "All SingHealth Polyclinics",
                                        hours: "Varies by location",
                                        cost: "$15.60 - $26.40 per visit"
                                    }
                                ]
                            },
                            general_doctors: {
                                title: "General Doctors",
                                icon: "üë®‚Äç‚öïÔ∏è",
                                services: [
                                    {
                                        name: "SingHealth Polyclinics",
                                        description: "Primary healthcare and family medicine",
                                        website: "https://www.singhealth.com.sg/polyclinics",
                                        phone: "6643-6969",
                                        appointment: "https://www.healthhub.sg/myhealth/medical/appointment",
                                        address: "21 locations island-wide",
                                        hours: "Mon-Fri 8:00AM-12:30PM, 2:00PM-4:30PM",
                                        cost: "$10.50 (Citizens), $35 (Others)"
                                    },
                                    {
                                        name: "24-Hour Clinics",
                                        description: "Round-the-clock medical care",
                                        website: "https://www.healthhub.sg",
                                        phone: "Varies by clinic",
                                        address: "Raffles Hospital, Mount Elizabeth, etc.",
                                        hours: "24/7",
                                        cost: "$150-300 per consultation"
                                    }
                                ]
                            },
                            pharmacy: {
                                title: "Pharmacy",
                                icon: "üíä",
                                services: [
                                    {
                                        name: "Guardian Pharmacy",
                                        description: "Prescription and over-counter medications",
                                        website: "https://www.guardian.com.sg",
                                        phone: "6338-6628",
                                        address: "150+ outlets island-wide",
                                        hours: "Varies by outlet (many 24/7)",
                                        cost: "Competitive prices, member discounts"
                                    },
                                    {
                                        name: "Watson's Pharmacy",
                                        description: "Health and wellness products",
                                        website: "https://www.watsons.com.sg",
                                        phone: "Multiple outlets",
                                        address: "100+ locations",
                                        hours: "Usually 10AM-10PM",
                                        cost: "Regular promotions available"
                                    }
                                ]
                            }
                        }
                    },
                    housing: {
                        title: "Housing & Accommodation",
                        icon: "üè†",
                        subcategories: {
                            hdb_rental: {
                                title: "HDB Rental",
                                icon: "üèòÔ∏è",
                                services: [
                                    {
                                        name: "HDB Rental Application",
                                        description: "Subsidized public housing rental",
                                        website: "https://www.hdb.gov.sg/residential/renting-a-flat",
                                        phone: "1800-225-5432",
                                        address: "HDB Hub, 480 Lorong 6 Toa Payoh",
                                        hours: "Mon-Fri 8:30AM-5:00PM",
                                        cost: "From S$26/month (income-dependent)",
                                        eligibility: "Singapore Citizens/PR with low income"
                                    }
                                ]
                            },
                            shared_accommodation: {
                                title: "Shared Housing",
                                icon: "üè°",
                                services: [
                                    {
                                        name: "PropertyGuru Room Rental",
                                        description: "Find shared rooms and apartments",
                                        website: "https://www.propertyguru.com.sg/property-for-rent",
                                        phone: "6505-0000",
                                        cost: "$300-800/month",
                                        features: "Verified listings, multiple options"
                                    }
                                ]
                            }
                        }
                    },
                    groceries: {
                        title: "Groceries & Food",
                        icon: "üõí",
                        subcategories: {
                            supermarkets: {
                                title: "Affordable Supermarkets",
                                icon: "üè™",
                                services: [
                                    {
                                        name: "FairPrice Supermarket",
                                        description: "Budget-friendly groceries and household items",
                                        website: "https://www.fairprice.com.sg",
                                        phone: "6380-5858",
                                        address: "300+ outlets nationwide",
                                        hours: "Usually 8:00AM-10:00PM",
                                        features: "LinkPoints rewards, bulk discounts"
                                    },
                                    {
                                        name: "Sheng Siong",
                                        description: "Local supermarket chain with competitive prices",
                                        website: "https://corporate.shengsiong.com.sg",
                                        phone: "6741-8188",
                                        address: "60+ outlets",
                                        hours: "7:00AM-11:00PM",
                                        features: "Fresh produce, house brands"
                                    }
                                ]
                            },
                            food_assistance: {
                                title: "Food Assistance",
                                icon: "üçΩÔ∏è",
                                services: [
                                    {
                                        name: "Food Bank Singapore",
                                        description: "Free food distribution for low-income families",
                                        website: "https://www.foodbank.sg",
                                        phone: "6636-1785",
                                        address: "1 Kaki Bukit Road 1, #01-33",
                                        hours: "Mon-Fri 9:00AM-6:00PM",
                                        cost: "Free (eligibility required)",
                                        eligibility: "Household income ‚â§ $1,900"
                                    }
                                ]
                            }
                        }
                    },
                    legal: {
                        title: "Legal Aid",
                        icon: "‚öñÔ∏è",
                        subcategories: {
                            legal_advice: {
                                title: "Free Legal Advice",
                                icon: "üìã",
                                services: [
                                    {
                                        name: "Legal Aid Bureau",
                                        description: "Free legal assistance for qualifying cases",
                                        website: "https://lab.mlaw.gov.sg",
                                        phone: "6536-0650",
                                        address: "45 Maxwell Road #07-11",
                                        hours: "Mon-Fri 8:30AM-5:00PM",
                                        cost: "Free (means test applies)",
                                        services_offered: "Civil, family, criminal matters"
                                    }
                                ]
                            }
                        }
                    },
                    social: {
                        title: "Social Life & Community",
                        icon: "üë•",
                        subcategories: {
                            community_centers: {
                                title: "Community Centers",
                                icon: "üè¢",
                                services: [
                                    {
                                        name: "People's Association Community Centres",
                                        description: "Local community activities and programs",
                                        website: "https://www.pa.gov.sg",
                                        phone: "6225-5322",
                                        address: "100+ centers island-wide",
                                        hours: "Varies by center",
                                        activities: "Sports, classes, events, networking"
                                    }
                                ]
                            }
                        }
                    },
                    financial: {
                        title: "Financial Services",
                        icon: "üí∞",
                        subcategories: {
                            banking: {
                                title: "Banking Services",
                                icon: "üè¶",
                                services: [
                                    {
                                        name: "POSB/DBS Bank",
                                        description: "Basic banking services for foreign workers",
                                        website: "https://www.posb.com.sg",
                                        phone: "1800-339-6963",
                                        address: "200+ branches and ATMs",
                                        hours: "Mon-Fri 9:30AM-4:30PM",
                                        services_offered: "Savings accounts, remittance"
                                    }
                                ]
                            }
                        }
                    },
                    emergency: {
                        title: "Emergency Services",
                        icon: "üö®",
                        subcategories: {
                            emergency_contacts: {
                                title: "Emergency Contacts",
                                icon: "üìû",
                                services: [
                                    {
                                        name: "Emergency Hotlines",
                                        description: "Critical emergency contact numbers",
                                        police: "999",
                                        ambulance: "995",
                                        fire: "995",
                                        non_emergency_police: "1800-255-0000",
                                        cost: "Free"
                                    }
                                ]
                            }
                        }
                    }
                };

                this.init();
            }

            init() {
                this.bindEvents();
                this.updateLanguage();
                this.startConversation();
            }

            bindEvents() {
                document.getElementById('sendButton').addEventListener('click', () => {
                    this.sendMessage();
                });

                document.getElementById('chatInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.sendMessage();
                    }
                });
            }

            updateLanguage() {
                const lang = this.translations[this.currentLanguage];
                document.getElementById('headerTitle').textContent = lang.headerTitle;
                document.getElementById('headerSubtitle').textContent = lang.headerSubtitle;
                document.getElementById('chatInput').placeholder = lang.inputPlaceholder;
                
                const welcomeMsg = document.getElementById('welcomeMessage');
                if (welcomeMsg) {
                    welcomeMsg.textContent = lang.welcomeMessage;
                }
            }

            startConversation() {
                setTimeout(() => {
                    this.askForLanguage();
                }, 1000);
            }

            askForLanguage() {
                const lang = this.translations[this.currentLanguage];
                this.addBotMessage(lang.languageQuestion);
                this.showLanguageOptions();
                this.conversationState = 'language';
            }

            showLanguageOptions() {
                const quickOptions = document.getElementById('quickOptions');
                quickOptions.innerHTML = '';
                
                const languages = [
                    { code: 'en', name: 'üá¨üáß English' },
                    { code: 'zh', name: 'üá®üá≥ ‰∏≠Êñá' },
                    { code: 'ta', name: 'üáÆüá≥ ‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç' },
                    { code: 'hi', name: 'üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä' },
                    { code: 'bn', name: 'üáßüá© ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ' },
                    { code: 'id', name: 'üáÆüá© Bahasa' }
                ];

                languages.forEach(lang => {
                    const button = document.createElement('button');
                    button.className = 'quick-option language-option';
                    button.textContent = lang.name;
                    button.onclick = () => this.selectLanguage(lang.code);
                    quickOptions.appendChild(button);
                });
            }

            selectLanguage(langCode) {
                this.currentLanguage = langCode;
                this.updateLanguage();
                document.getElementById('quickOptions').innerHTML = '';
                this.addUserMessage(this.translations[langCode].headerTitle);
                
                this.showTypingIndicator();
                setTimeout(() => {
                    this.askForName();
                }, 1000);
            }

            askForName() {
                const lang = this.translations[this.currentLanguage];
                this.addBotMessage(lang.nameQuestion);
                this.conversationState = 'name';
            }

            sendMessage() {
                const input = document.getElementById('chatInput');
                const message = input.value.trim();
                
                if (!message) return;

                this.addUserMessage(message);
                input.value = '';

                this.showTypingIndicator();
                
                setTimeout(() => {
                    this.processUserInput(message);
                }, 1000);
            }

            addUserMessage(message) {
                const chatMessages = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message user-message';
                messageDiv.innerHTML = `<div class="user-text">${message}</div>`;
                chatMessages.appendChild(messageDiv);
                this.scrollToBottom();
            }

            addBotMessage(message, showOptions = false) {
                this.hideTypingIndicator();
                
                const chatMessages = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message bot-message';
                messageDiv.innerHTML = `
                    <div class="bot-avatar">ü§ñ</div>
                    <div class="bot-text">${message}</div>
                `;
                chatMessages.appendChild(messageDiv);
                
                if (showOptions) {
                    this.showServiceOptions();
                }
                
                this.scrollToBottom();
            }

            showTypingIndicator() {
                document.getElementById('typingIndicator').style.display = 'flex';
                this.scrollToBottom();
            }

            hideTypingIndicator() {
                document.getElementById('typingIndicator').style.display = 'none';
            }

            processUserInput(message) {
                const lang = this.translations[this.currentLanguage];
                
                switch (this.conversationState) {
                    case 'name':
                        this.userProfile.name = message;
                        this.addBotMessage(`Nice to meet you, ${message}! ${lang.nationalityQuestion}`);
                        this.conversationState = 'nationality';
                        break;
                        
                    case 'nationality':
                        this.userProfile.nationality = message;
                        this.addBotMessage(lang.workTypeQuestion);
                        this.conversationState = 'workType';
                        break;
                        
                    case 'workType':
                        this.userProfile.workType = message;
                        this.addBotMessage(lang.budgetQuestion);
                        this.conversationState = 'budget';
                        break;
                        
                    case 'budget':
                        this.userProfile.budget = message;
                        this.addBotMessage(`Thank you for the information! ${lang.servicesQuestion}`, true);
                        this.conversationState = 'services';
                        break;
                        
                    default:
                        this.handleServiceQuery(message);
                        break;
                }
            }

            showServiceOptions() {
                const lang = this.translations[this.currentLanguage];
                const quickOptions = document.getElementById('quickOptions');
                quickOptions.innerHTML = '';
                
                const options = [
                    { key: 'healthcare', text: lang.healthcareOption },
                    { key: 'housing', text: lang.housingOption },
                    { key: 'groceries', text: lang.groceriesOption },
                    { key: 'legal', text: lang.legalOption },
                    { key: 'social', text: lang.socialOption },
                    { key: 'financial', text: lang.financialOption },
                    { key: 'emergency', text: lang.emergencyOption },
                    { key: 'language', text: lang.changeLanguage }
                ];

                options.forEach(option => {
                    const button = document.createElement('button');
                    button.className = option.key === 'language' ? 'quick-option language-option' : 'quick-option';
                    button.textContent = option.text;
                    button.onclick = () => {
                        if (option.key === 'language') {
                            this.showLanguageSelection();
                        } else {
                            this.selectService(option.key);
                        }
                    };
                    quickOptions.appendChild(button);
                });
            }

            showLanguageSelection() {
                document.getElementById('quickOptions').innerHTML = '';
                this.addUserMessage(this.translations[this.currentLanguage].changeLanguage);
                this.showTypingIndicator();
                setTimeout(() => {
                    this.addBotMessage(this.translations[this.currentLanguage].languageQuestion);
                    this.showLanguageOptions();
                }, 500);
            }

            selectService(serviceKey) {
                document.getElementById('quickOptions').innerHTML = '';
                this.addUserMessage(this.translations[this.currentLanguage][serviceKey + 'Option']);
                this.currentCategory = serviceKey;
                
                this.showTypingIndicator();
                setTimeout(() => {
                    this.showSubcategories(serviceKey);
                }, 1000);
            }

            showSubcategories(serviceKey) {
                const service = this.serviceDatabase[serviceKey];
                if (!service || !service.subcategories) {
                    this.addBotMessage("I'm sorry, I don't have information about that service yet.");
                    return;
                }

                let response = `Here are the ${service.title.toLowerCase()} categories I can help you with:\n\n`;
                this.addBotMessage(response);

                const quickOptions = document.getElementById('quickOptions');
                quickOptions.innerHTML = '';

                // Add subcategory buttons
                Object.keys(service.subcategories).forEach(subKey => {
                    const subcategory = service.subcategories[subKey];
                    const button = document.createElement('div');
                    button.className = 'subcategory-card';
                    button.innerHTML = `
                        <div class="subcategory-title">${subcategory.icon} ${subcategory.title}</div>
                        <div class="subcategory-desc">Click to view services</div>
                    `;
                    button.onclick = () => this.showServiceDetails(serviceKey, subKey);
                    quickOptions.appendChild(button);
                });

                // Add back button
                const backButton = document.createElement('button');
                backButton.className = 'back-button';
                backButton.textContent = this.translations[this.currentLanguage].backToServices;
                backButton.onclick = () => {
                    this.addUserMessage(this.translations[this.currentLanguage].backToServices);
                    this.showTypingIndicator();
                    setTimeout(() => {
                        this.addBotMessage(this.translations[this.currentLanguage].servicesQuestion, true);
                    }, 500);
                };
                quickOptions.appendChild(backButton);
            }

            showServiceDetails(serviceKey, subcategoryKey) {
                const subcategory = this.serviceDatabase[serviceKey].subcategories[subcategoryKey];
                this.addUserMessage(`${subcategory.icon} ${subcategory.title}`);
                
                document.getElementById('quickOptions').innerHTML = '';
                this.showTypingIndicator();

                setTimeout(() => {
                    this.displayServiceCards(subcategory);
                    this.showBackToSubcategoriesButton(serviceKey);
                }, 1000);
            }

            displayServiceCards(subcategory) {
                let response = `Here are the ${subcategory.title.toLowerCase()} services available:\n\n`;
                this.addBotMessage(response);

                const chatMessages = document.getElementById('chatMessages');
                
                subcategory.services.forEach(service => {
                    const serviceCard = document.createElement('div');
                    serviceCard.className = 'message bot-message';
                    
                    let contactHTML = '';
                    if (service.phone) contactHTML += `<div class="contact-item"><span class="contact-icon">üìû</span><strong>Phone:</strong> ${service.phone}</div>`;
                    if (service.website) contactHTML += `<div class="contact-item"><span class="contact-icon">üåê</span><strong>Website:</strong> <a href="${service.website}" target="_blank">${service.website}</a></div>`;
                    if (service.appointment) contactHTML += `<div class="contact-item"><span class="contact-icon">üìÖ</span><strong>Appointments:</strong> <a href="${service.appointment}" target="_blank">Book Online</a></div>`;
                    if (service.email) contactHTML += `<div class="contact-item"><span class="contact-icon">‚úâÔ∏è</span><strong>Email:</strong> ${service.email}</div>`;
                    if (service.address) contactHTML += `<div class="contact-item"><span class="contact-icon">üìç</span><strong>Address:</strong> ${service.address}</div>`;
                    if (service.hours) contactHTML += `<div class="contact-item"><span class="contact-icon">üïê</span><strong>Hours:</strong> ${service.hours}</div>`;
                    if (service.cost) contactHTML += `<div class="contact-item"><span class="contact-icon">üí∞</span><strong>Cost:</strong> ${service.cost}</div>`;
                    if (service.eligibility) contactHTML += `<div class="contact-item"><span class="contact-icon">‚úÖ</span><strong>Eligibility:</strong> ${service.eligibility}</div>`;
                    if (service.features) contactHTML += `<div class="contact-item"><span class="contact-icon">‚≠ê</span><strong>Features:</strong> ${service.features}</div>`;
                    if (service.services_offered) contactHTML += `<div class="contact-item"><span class="contact-icon">üè•</span><strong>Services:</strong> ${service.services_offered}</div>`;
                    if (service.activities) contactHTML += `<div class="contact-item"><span class="contact-icon">üéØ</span><strong>Activities:</strong> ${service.activities}</div>`;
                    
                    // Special handling for emergency services
                    if (service.police) contactHTML += `<div class="contact-item"><span class="contact-icon">üöî</span><strong>Police:</strong> ${service.police}</div>`;
                    if (service.ambulance) contactHTML += `<div class="contact-item"><span class="contact-icon">üöë</span><strong>Ambulance:</strong> ${service.ambulance}</div>`;
                    if (service.fire) contactHTML += `<div class="contact-item"><span class="contact-icon">üöí</span><strong>Fire:</strong> ${service.fire}</div>`;
                    if (service.emergency) contactHTML += `<div class="contact-item"><span class="contact-icon">üÜò</span><strong>Emergency:</strong> ${service.emergency}</div>`;
                    if (service.non_emergency_police) contactHTML += `<div class="contact-item"><span class="contact-icon">üìû</span><strong>Non-Emergency Police:</strong> ${service.non_emergency_police}</div>`;

                    serviceCard.innerHTML = `
                        <div class="bot-avatar">ü§ñ</div>
                        <div class="bot-text">
                            <div class="service-card">
                                <div class="service-header">
                                    <span class="service-icon">${subcategory.icon}</span>
                                    <span class="service-title">${service.name}</span>
                                </div>
                                <div class="service-details">${service.description}</div>
                                <div class="contact-info">
                                    ${contactHTML}
                                </div>
                            </div>
                        </div>
                    `;
                    
                    chatMessages.appendChild(serviceCard);
                });

                this.scrollToBottom();
            }

            showBackToSubcategoriesButton(serviceKey) {
                const quickOptions = document.getElementById('quickOptions');
                
                const backButton = document.createElement('button');
                backButton.className = 'back-button';
                backButton.textContent = `‚Üê Back to ${this.serviceDatabase[serviceKey].title}`;
                backButton.onclick = () => {
                    this.addUserMessage(`‚Üê Back to ${this.serviceDatabase[serviceKey].title}`);
                    this.showTypingIndicator();
                    setTimeout(() => {
                        this.showSubcategories(serviceKey);
                    }, 500);
                };
                quickOptions.appendChild(backButton);

                const servicesButton = document.createElement('button');
                servicesButton.className = 'back-button';
                servicesButton.textContent = this.translations[this.currentLanguage].backToServices;
                servicesButton.onclick = () => {
                    this.addUserMessage(this.translations[this.currentLanguage].backToServices);
                    this.showTypingIndicator();
                    setTimeout(() => {
                        this.addBotMessage(this.translations[this.currentLanguage].servicesQuestion, true);
                    }, 500);
                };
                quickOptions.appendChild(servicesButton);
            }

            handleServiceQuery(message) {
                // Simple keyword matching for service queries
                const lowerMessage = message.toLowerCase();
                
                if (lowerMessage.includes('health') || lowerMessage.includes('doctor') || lowerMessage.includes('medical')) {
                    this.selectService('healthcare');
                } else if (lowerMessage.includes('house') || lowerMessage.includes('room') || lowerMessage.includes('rent')) {
                    this.selectService('housing');
                } else if (lowerMessage.includes('food') || lowerMessage.includes('grocery') || lowerMessage.includes('eat')) {
                    this.selectService('groceries');
                } else if (lowerMessage.includes('legal') || lowerMessage.includes('law') || lowerMessage.includes('help')) {
                    this.selectService('legal');
                } else if (lowerMessage.includes('social') || lowerMessage.includes('community') || lowerMessage.includes('friend')) {
                    this.selectService('social');
                } else if (lowerMessage.includes('money') || lowerMessage.includes('bank') || lowerMessage.includes('financial')) {
                    this.selectService('financial');
                } else if (lowerMessage.includes('emergency') || lowerMessage.includes('urgent') || lowerMessage.includes('help')) {
                    this.selectService('emergency');
                } else {
                    this.addBotMessage("I understand you need help. Let me show you the services I can assist with:", true);
                }
            }

            scrollToBottom() {
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        // Initialize the chatbot when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new MigrantWorkerChatbot();
        });
    </script>
</body>
</html>
